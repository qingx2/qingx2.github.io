<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Homebrew 安装 PHP、Nginx、MySql | Maverick</title>
<meta name="keywords" content="">
<meta name="description" content="参考 全新安装 Mac OS Sierra (10.12) 并使用 HomeBrew 安装 ZSH &#43; MNMP (Mac &#43; Nginx &#43; MySQL &#43; PHP) 开发环境">
<meta name="author" content="">
<link rel="canonical" href="https://qingx2.github.io/post/homebrew-%E5%AE%89%E8%A3%85-phpnginxmysql/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css" integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://qingx2.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://qingx2.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://qingx2.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://qingx2.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://qingx2.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Homebrew 安装 PHP、Nginx、MySql" />
<meta property="og:description" content="参考 全新安装 Mac OS Sierra (10.12) 并使用 HomeBrew 安装 ZSH &#43; MNMP (Mac &#43; Nginx &#43; MySQL &#43; PHP) 开发环境" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://qingx2.github.io/post/homebrew-%E5%AE%89%E8%A3%85-phpnginxmysql/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2017-04-19T09:32:37+00:00" />
<meta property="article:modified_time" content="2017-04-19T09:32:37+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Homebrew 安装 PHP、Nginx、MySql"/>
<meta name="twitter:description" content="参考 全新安装 Mac OS Sierra (10.12) 并使用 HomeBrew 安装 ZSH &#43; MNMP (Mac &#43; Nginx &#43; MySQL &#43; PHP) 开发环境"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://qingx2.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Homebrew 安装 PHP、Nginx、MySql",
      "item": "https://qingx2.github.io/post/homebrew-%E5%AE%89%E8%A3%85-phpnginxmysql/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Homebrew 安装 PHP、Nginx、MySql",
  "name": "Homebrew 安装 PHP、Nginx、MySql",
  "description": "参考 全新安装 Mac OS Sierra (10.12) 并使用 HomeBrew 安装 ZSH + MNMP (Mac + Nginx + MySQL + PHP) 开发环境\n",
  "keywords": [
    
  ],
  "articleBody": "参考 全新安装 Mac OS Sierra (10.12) 并使用 HomeBrew 安装 ZSH + MNMP (Mac + Nginx + MySQL + PHP) 开发环境\n安装 Mysql 查找 mysql\n➜ ~ brew search mysql automysqlbackup mysql-connector-c homebrew/php/php53-mysqlnd_ms mysql-connector-c++ homebrew/php/php54-mysqlnd_ms mysql-sandbox homebrew/php/php55-mysqlnd_ms mysql-search-replace homebrew/php/php56-mysqlnd_ms mysql-utilities mysql mysql@5.5 mysql++ mysql@5.6 mysql-cluster mysqltuner Caskroom/cask/mysql-connector-python Caskroom/cask/mysql-shell Caskroom/cask/mysql-utilities Caskroom/cask/mysqlworkbench Caskroom/cask/navicat-for-mysql Caskroom/cask/sqlpro-for-mysql 查看版本信息\n➜ ~ brew info mysql mysql: stable 5.7.17 (bottled) 执行安装\n➜ ~ brew install mysql # 略... # 安装完成后, 倒数第三行: # We've installed your MySQL database without a root password. To secure it run: # mysql_secure_installation # To connect run: # mysql -uroot 上面安装成功后提示的意思是说, 你安装的 MySql 没有密码, 执行mysql_secure_installation 进行设置密码, 其中会提示很多信息让你设置, 根据提示自己设置就行了。\n进入 MySql，看看是否已经成功\n➜ ~ mysql -uroot -p 查看数据库\nmysql\u003e show databases; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | | sys | +--------------------+ 4 rows in set (0.00 sec) OK! MySql已经安装成功了。\n# 执行 exit 退出 MySql mysql\u003e exit 安装 PHP 搜索PHP70版本brew search php 如果有提示信息，那就需要按照提示来添加PHP 扩展：\n➜ ~ brew tap homebrew/dupes ➜ ~ brew tap josegonzalez/homebrew-php 此时就可以正常搜索安装 PHP 了，以下参数可以使用 brew options php70 来根据自己需求添加安装\n➜ ~ brew install php70 --with-debug --with-gmp --with-homebrew-curl --with-homebrew-libressl --with-homebrew-libxml2 --with-homebrew-libxslt --with-imap --with-libmysql --with-mssql --with-pear 安装完成后，覆盖 macOS 自带的 PATH 路径，执行以下命令将路径添加~/.bash_profile文件:\n➜ ~ echo 'export PATH=\"$(brew --prefix php70)/bin:$PATH\"' \u003e\u003e ~/.bash_profile ➜ ~ echo 'export PATH=\"$(brew --prefix php70)/sbin:$PATH\"' \u003e\u003e ~/.bash_profile ➜ ~ echo 'export PATH=\"/usr/local/bin:/usr/local/sbib:$PATH\"' \u003e\u003e ~/.bash_profile 添加完成后查看版本信息, 出现以下提示说明已正常工作:\n➜ ~ php -v PHP 7.0.18 (cli) (built: Apr 28 2017 10:34:29) ( NTS DEBUG ) Copyright (c) 1997-2017 The PHP Group Zend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies ➜ ~ php-fpm -v PHP 7.0.18 (fpm-fcgi) (built: Apr 28 2017 10:34:35) (DEBUG) Copyright (c) 1997-2017 The PHP Group Zend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies 启动 PHP-FPM:\n# 先将系统自带 php-fpm 杀死 ➜ ~ killall php-fpm # 启动7.0版本的 php-fpm ➜ ~ sudo php-fpm -D 安装 Nginx ➜ ~ brew install nginx Updating Homebrew... ==\u003e Downloading https://homebrew.bintray.com/bottles/nginx-1.10.3.sierra.bottle.tar.gz Already downloaded: /Users/surprisepeas/Library/Caches/Homebrew/nginx-1.10.3.sierra.bottle.tar.gz ==\u003e Pouring nginx-1.10.3.sierra.bottle.tar.gz ==\u003e Using the sandbox ==\u003e Caveats Docroot is: /usr/local/var/www The default port has been set in /usr/local/etc/nginx/nginx.conf to 8080 so that nginx can run without sudo. nginx will load all files in /usr/local/etc/nginx/servers/. To have launchd start nginx now and restart at login: brew services start nginx Or, if you don't want/need a background service you can just run: nginx ==\u003e Summary 🍺 /usr/local/Cellar/nginx/1.10.3: 8 files, 980.9KB ➜ ~ nginx -v nginx version: nginx/1.10.3 启动 Nginx:\n➜ ~ sudo nginx # 重新加载配置|重启 |停止|退出 ➜ ~ nginx -s reload|reopen|stop|quit ➜ ~ nginx -s stop 重置nginx.conf文件\nnginx -c /usr/local/etc/nginx/nginx.conf 配置 /usr/local/etc/nginx/nginx.conf :\nworker_processes 1; error_log /usr/local/var/log/nginx/error.log debug; pid /usr/local/var/run/nginx.pid; events { worker_connections 256; } http { include mime.types; default_type application/octet-stream; log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; access_log /usr/local/var/log/nginx/access.log main; sendfile on; keepalive_timeout 65; port_in_redirect off; include /usr/local/etc/nginx/servers/*; } 添加 php-fpm 文件,\n➜ ~ vi /usr/local/etc/nginx/php-fpm location ~ \\.php$ { try_files $uri = 404; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_intercept_errors on; include /usr/local/etc/nginx/fastcgi.conf; } 在 /usr/local/var/www 目录下创建项目文件,\n➜ ~ vi /usr/local/var/www/info.php # 在 info.php 文件写入 \u003c?php info(); ?\u003e 创建配置站点目录的配置文件:\n➜ ~ vi /usr/local/etc/nginx/servers/default.conf 在 default.conf 文件中写入:\nserver { listen 80; server_name localhost; root /usr/local/var/www/default; access_log /usr/local/var/log/nginx/default.access.log main; location / { index index.html index.htm index.php; autoindex on; include /usr/local/etc/nginx/php-fpm; } error_page 404 /404.html; error_page 403 /403.html; } 重启 nginx服务:\n➜ ~ sudo nginx -s reload 打开浏览器键入地址 http://localhost/info.php ",
  "wordCount" : "541",
  "inLanguage": "en",
  "datePublished": "2017-04-19T09:32:37Z",
  "dateModified": "2017-04-19T09:32:37Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://qingx2.github.io/post/homebrew-%E5%AE%89%E8%A3%85-phpnginxmysql/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Maverick",
    "logo": {
      "@type": "ImageObject",
      "url": "https://qingx2.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://qingx2.github.io/" accesskey="h" title="Maverick (Alt + H)">Maverick</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Homebrew 安装 PHP、Nginx、MySql
    </h1>
    <div class="post-meta"><span title='2017-04-19 09:32:37 +0000 UTC'>April 19, 2017</span>

</div>
  </header> 
  <div class="post-content"><p>参考 <a href="https://laravel-china.org/topics/3129/new-installation-mac-os-sierra-1012-and-use-homebrew-to-install-zsh-mnmp-mac-nginx-mysql-php-development-environment">全新安装 Mac OS Sierra (10.12) 并使用 HomeBrew 安装 ZSH + MNMP (Mac + Nginx + MySQL + PHP) 开发环境</a></p>
<h4 id="安装-mysql">安装 Mysql<a hidden class="anchor" aria-hidden="true" href="#安装-mysql">#</a></h4>
<p>查找 mysql</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ brew search mysql
</span></span><span style="display:flex;"><span>automysqlbackup                      mysql-connector-c
</span></span><span style="display:flex;"><span>homebrew/php/php53-mysqlnd_ms        mysql-connector-c++
</span></span><span style="display:flex;"><span>homebrew/php/php54-mysqlnd_ms        mysql-sandbox
</span></span><span style="display:flex;"><span>homebrew/php/php55-mysqlnd_ms        mysql-search<span style="color:#f92672">-replace</span>
</span></span><span style="display:flex;"><span>homebrew/php/php56-mysqlnd_ms        mysql-utilities
</span></span><span style="display:flex;"><span>mysql                                mysql@5.5
</span></span><span style="display:flex;"><span>mysql++                              mysql@5.6
</span></span><span style="display:flex;"><span>mysql-cluster                        mysqltuner
</span></span><span style="display:flex;"><span>Caskroom/cask/mysql-connector-python
</span></span><span style="display:flex;"><span>Caskroom/cask/mysql-shell
</span></span><span style="display:flex;"><span>Caskroom/cask/mysql-utilities
</span></span><span style="display:flex;"><span>Caskroom/cask/mysqlworkbench
</span></span><span style="display:flex;"><span>Caskroom/cask/navicat-for-mysql
</span></span><span style="display:flex;"><span>Caskroom/cask/sqlpro-for-mysql
</span></span></code></pre></div><p>查看版本信息</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ brew info mysql
</span></span><span style="display:flex;"><span>mysql<span style="color:#960050;background-color:#1e0010">:</span> stable <span style="color:#ae81ff">5.7</span>.17 (bottled)
</span></span></code></pre></div><p>执行安装</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ brew install mysql
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 略...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装完成后, 倒数第三行:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We&#39;ve installed your MySQL database without a root password. To secure it run:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    mysql_secure_installation</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># To connect run:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#    mysql -uroot</span>
</span></span></code></pre></div><p>上面安装成功后提示的意思是说, 你安装的 MySql 没有密码, 执行<code>mysql_secure_installation</code> 进行设置密码, 其中会提示很多信息让你设置, 根据提示自己设置就行了。</p>
<p>进入 MySql，看看是否已经成功</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ mysql -uroot -p
</span></span></code></pre></div><p>查看数据库</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">show</span> <span style="color:#66d9ef">databases</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+--------------------+</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">Database</span>           <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+--------------------+</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> information_schema <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> mysql              <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> performance_schema <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> sys                <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+--------------------+</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> rows <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> sec)
</span></span></code></pre></div><p>OK! MySql已经安装成功了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Mysql" data-lang="Mysql"><span style="display:flex;"><span><span style="color:#75715e"># 执行 exit 退出 MySql
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">exit</span>
</span></span></code></pre></div><h4 id="安装-php">安装 PHP<a hidden class="anchor" aria-hidden="true" href="#安装-php">#</a></h4>
<p>搜索PHP70版本<code>brew search php</code> 如果有提示信息，那就需要按照提示来添加PHP 扩展：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ brew tap homebrew/dupes
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ brew tap josegonzalez/homebrew-php
</span></span></code></pre></div><p>此时就可以正常搜索安装 PHP 了，以下参数可以使用 <code>brew options php70</code> 来根据自己需求添加安装</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ brew install php70 --with-debug --with-gmp --with-homebrew-curl --with-homebrew-libressl --with-homebrew-libxml2 --with-homebrew-libxslt --with-imap --with-libmysql --with-mssql --with-pear
</span></span></code></pre></div><p>安装完成后，覆盖 macOS 自带的 PATH 路径，执行以下命令将路径添加<code>~/.bash_profile</code>文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ echo <span style="color:#e6db74">&#39;export PATH=&#34;$(brew --prefix php70)/bin:$PATH&#34;&#39;</span> &gt;&gt; ~/.bash_profile
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ echo <span style="color:#e6db74">&#39;export PATH=&#34;$(brew --prefix php70)/sbin:$PATH&#34;&#39;</span> &gt;&gt; ~/.bash_profile
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ echo <span style="color:#e6db74">&#39;export PATH=&#34;/usr/local/bin:/usr/local/sbib:$PATH&#34;&#39;</span> &gt;&gt; ~/.bash_profile
</span></span></code></pre></div><p>添加完成后查看版本信息, 出现以下提示说明已正常工作:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ php -v
</span></span><span style="display:flex;"><span>PHP <span style="color:#ae81ff">7.0</span>.18 (cli) (built<span style="color:#960050;background-color:#1e0010">:</span> Apr <span style="color:#ae81ff">28</span> <span style="color:#ae81ff">2017</span> <span style="color:#ae81ff">10</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#ae81ff">34</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#ae81ff">29</span>) ( NTS DEBUG )
</span></span><span style="display:flex;"><span>Copyright (c) <span style="color:#ae81ff">1997</span>-<span style="color:#ae81ff">2017</span> The PHP Group
</span></span><span style="display:flex;"><span>Zend Engine v3.0.<span style="color:#ae81ff">0</span>, Copyright (c) <span style="color:#ae81ff">1998</span>-<span style="color:#ae81ff">2017</span> Zend Technologies
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ php-fpm -v
</span></span><span style="display:flex;"><span>PHP <span style="color:#ae81ff">7.0</span>.18 (fpm-fcgi) (built<span style="color:#960050;background-color:#1e0010">:</span> Apr <span style="color:#ae81ff">28</span> <span style="color:#ae81ff">2017</span> <span style="color:#ae81ff">10</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#ae81ff">34</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#ae81ff">35</span>) (DEBUG)
</span></span><span style="display:flex;"><span>Copyright (c) <span style="color:#ae81ff">1997</span>-<span style="color:#ae81ff">2017</span> The PHP Group
</span></span><span style="display:flex;"><span>Zend Engine v3.0.<span style="color:#ae81ff">0</span>, Copyright (c) <span style="color:#ae81ff">1998</span>-<span style="color:#ae81ff">2017</span> Zend Technologies
</span></span></code></pre></div><p>启动 PHP-FPM:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># 先将系统自带 php-fpm 杀死</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ killall php-fpm
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 启动7.0版本的 php-fpm</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ sudo php-fpm -D
</span></span></code></pre></div><h4 id="安装-nginx">安装 Nginx<a hidden class="anchor" aria-hidden="true" href="#安装-nginx">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ brew install nginx
</span></span><span style="display:flex;"><span>Updating Homebrew...
</span></span><span style="display:flex;"><span>==&gt; Downloading https<span style="color:#960050;background-color:#1e0010">:</span>//homebrew.bintray.com/bottles/nginx-<span style="color:#ae81ff">1.10</span>.3.sierra.bottle.tar.gz
</span></span><span style="display:flex;"><span>Already downloaded<span style="color:#960050;background-color:#1e0010">:</span> /Users/surprisepeas/Library/Caches/Homebrew/nginx-<span style="color:#ae81ff">1.10</span>.3.sierra.bottle.tar.gz
</span></span><span style="display:flex;"><span>==&gt; Pouring nginx-<span style="color:#ae81ff">1.10</span>.3.sierra.bottle.tar.gz
</span></span><span style="display:flex;"><span>==&gt; Using the sandbox
</span></span><span style="display:flex;"><span>==&gt; Caveats
</span></span><span style="display:flex;"><span>Docroot is<span style="color:#960050;background-color:#1e0010">:</span> /usr/local/var/www
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The <span style="color:#66d9ef">default</span> port has been set <span style="color:#66d9ef">in</span> /usr/local/etc/nginx/nginx.conf to <span style="color:#ae81ff">8080</span> so that
</span></span><span style="display:flex;"><span>nginx can run without sudo.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nginx will load all files <span style="color:#66d9ef">in</span> /usr/local/etc/nginx/servers/.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>To have launchd start nginx now and restart at login<span style="color:#960050;background-color:#1e0010">:</span>
</span></span><span style="display:flex;"><span>  brew services start nginx
</span></span><span style="display:flex;"><span>Or, <span style="color:#66d9ef">if</span> you don<span style="color:#960050;background-color:#1e0010">&#39;</span>t want/need a background service you can just run<span style="color:#960050;background-color:#1e0010">:</span>
</span></span><span style="display:flex;"><span>  nginx
</span></span><span style="display:flex;"><span>==&gt; Summary
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">🍺</span>  /usr/local/Cellar/nginx/<span style="color:#ae81ff">1.10</span>.<span style="color:#ae81ff">3</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#ae81ff">8</span> files, <span style="color:#ae81ff">980.9</span>KB
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ nginx -v
</span></span><span style="display:flex;"><span>nginx version<span style="color:#960050;background-color:#1e0010">:</span> nginx/<span style="color:#ae81ff">1.10</span>.3
</span></span></code></pre></div><p>启动 Nginx:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ sudo nginx
</span></span><span style="display:flex;"><span><span style="color:#75715e">#      	  重新加载配置|重启  |停止|退出</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ nginx -s reload|reopen|stop|quit
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ nginx -s stop
</span></span></code></pre></div><p>重置nginx.conf文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>nginx -c /usr/local/etc/nginx/nginx.conf
</span></span></code></pre></div><p>配置 <code>/usr/local/etc/nginx/nginx.conf</code> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>worker_processes  <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>error_log   /usr/local/var/log/nginx/error.log debug;
</span></span><span style="display:flex;"><span>pid        /usr/local/var/run/nginx.pid;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>events {
</span></span><span style="display:flex;"><span>    worker_connections  <span style="color:#ae81ff">256</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>http {
</span></span><span style="display:flex;"><span>    include       mime.types;
</span></span><span style="display:flex;"><span>    default_type  application/octet-stream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    log_format  main  <span style="color:#e6db74">&#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#e6db74">&#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#e6db74">&#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    access_log  /usr/local/var/log/nginx/access.log  main;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    sendfile        on;
</span></span><span style="display:flex;"><span>    keepalive_timeout  <span style="color:#ae81ff">65</span>;
</span></span><span style="display:flex;"><span>    port_in_redirect off;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    include /usr/local/etc/nginx/servers/*;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>添加 <code>php-fpm</code> 文件,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ vi /usr/local/etc/nginx/php-fpm
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>location ~ \.php$ {
</span></span><span style="display:flex;"><span>  try_files                   $uri = <span style="color:#ae81ff">404</span>;
</span></span><span style="display:flex;"><span>  fastcgi_pass                <span style="color:#ae81ff">127.0</span>.0.<span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">:</span><span style="color:#ae81ff">9000</span>;
</span></span><span style="display:flex;"><span>  fastcgi_index               index.php;
</span></span><span style="display:flex;"><span>  fastcgi_intercept_errors    on;
</span></span><span style="display:flex;"><span>  include /usr/local/etc/nginx/fastcgi.conf;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>在 <code>/usr/local/var/www</code> 目录下创建项目文件,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ vi /usr/local/var/www/info.php
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 在 info.php 文件写入</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#66d9ef">?</span>php info(); ?&gt;
</span></span></code></pre></div><p>创建配置站点目录的配置文件:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ vi /usr/local/etc/nginx/servers/<span style="color:#66d9ef">default</span>.conf
</span></span></code></pre></div><p>在 <code>default.conf</code> 文件中写入:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Shell" data-lang="Shell"><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    listen       80;
</span></span><span style="display:flex;"><span>    server_name  localhost;
</span></span><span style="display:flex;"><span>    root         /usr/local/var/www/default;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    access_log  /usr/local/var/log/nginx/default.access.log  main;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    location / <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        index  index.html index.htm index.php;
</span></span><span style="display:flex;"><span>        autoindex   on;
</span></span><span style="display:flex;"><span>        include     /usr/local/etc/nginx/php-fpm;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    error_page  <span style="color:#ae81ff">404</span>     /404.html;
</span></span><span style="display:flex;"><span>    error_page  <span style="color:#ae81ff">403</span>     /403.html;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>重启 nginx服务:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">➜</span>  ~ sudo nginx -s reload
</span></span></code></pre></div><p>打开浏览器键入地址 http://localhost/info.php <img loading="lazy" src="http://omixc2ggv.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-28%2014.44.33.png" alt="web"  />
</p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://qingx2.github.io/">Maverick</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
